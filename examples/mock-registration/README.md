# ANS Mock Registration Test
This directory contains a self-contained Node.js script that demonstrates a complete, end-to-end mock agent registration for the Agent Network System(ANS).
The script's primary purpose is to serve as a practical, hands-on example of how to:
1.  Generate a valid cryptographic key pair.
2.  Construct a valid agent registration payload.
3.  Sign the payload with the private key to create a `proofOfOwnership`.
4.  Validate the final payload against the official ANS registration schema.
5.  Generate a valid Decentralized Identifier (DID) for the agent.
This entire process is self-contained and **does not require any network connection or a running ANS backend**. It's an excellent tool forunderstanding the data structures and cryptographic requirements of the ANS registration process.

## Prerequisites
*   [Node.js](https://nodejs.org/) (v16 or later recommended)
*   [npm](https://www.npmjs.com/) (comes with Node.js)


## Installation
Before running the test, you need to install the required libraries listed in `package.json`. *Navigate to this directory* in your terminal and run:

```shell
  npm install
```

This will create a `node_modules` directory containing the necessary dependencies (`joi`, `uuid`, `multiformats`).

## Running the Test
Once the dependencies are installed, you can run the test using the following command:

```shell
  node run-test.js
```

You will see a detailed, step-by-step output in your console, showing the generated keys, the signed message, the final payload, the results of the
validation, and the data structure that would be sent to a real ANS service.
## Configuration
You can easily customize the agent data generated by the script by setting environment variables. This is useful for testing payloads for your own
regional or private ANS deployments.
| Environment Variable    | Description                                       | Default Value                               |
| ----------------------- | ------------------------------------------------- | ------------------------------------------- |
| `AGENT_ID`              | The unique ID for your agent.                     | `my-realistic-agent.ans`                    |
| `AGENT_NAME`            | The human-readable name of the agent.             | `My Realistic Agent`                        |
| `AGENT_DESCRIPTION`     | A short description of the agent.                 | `An agent with a...`                        |
| `AGENT_ORGANIZATION`    | The organization that owns the agent.             | `Test Corp`                                 |
| `AGENT_CAPABILITIES`    | A comma-separated list of capabilities.           | `test_capability`                           |
| `ENDPOINT_A2A`          | The agent-to-agent communication endpoint.        | `https://test.com/a2a`                      |
| `ENDPOINT_REST`         | The REST API endpoint for the agent.              | `https://test.com/api/v1`                   |

#### Example (Linux/macOS)

```shell
  AGENT_ID="logistics-agent.my-region.ans" \
  AGENT_NAME="EU Logistics Agent" \
  node run-test.js
```

#### Example (Windows PowerShell)

```powershell
  $env:AGENT_ID="logistics-agent.my-region.ans"
  $env:AGENT_NAME="EU Logistics Agent"
  node run-test.js
```

## File Descriptions
*   **`run-test.js`**: The main executable script that performs all the steps of the mock registration.
*   **`schemas.js`**: Contains the official Joi validation schema for the agent registration payload.
*   **`package.json`**: Defines the Node.js project and its dependencies.